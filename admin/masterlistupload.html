<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masterlist Bulk Upload - Dota 2 Tournament Manager</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        body {
            background-color: #f8f9fa;
        }
        .main-container {
            min-height: 100vh;
            padding: 20px;
        }
        .upload-card {
            max-width: 800px;
            margin: 0 auto;
        }
        .format-example {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            padding: 15px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background-color: #28a745; }
        .status-error { background-color: #dc3545; }
        .status-warning { background-color: #ffc107; }
        .status-info { background-color: #17a2b8; }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="upload-card">
            <!-- Header -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="h3 mb-1">
                        <i class="bi bi-upload me-2"></i>Masterlist Bulk Upload
                    </h1>
                    <p class="text-muted mb-0">Upload multiple players to the verified MMR database</p>
                </div>
                <a href="masterlist.html" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-1"></i>Back to Masterlist
                </a>
            </div>

            <!-- Upload Form -->
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-file-earmark-text me-2"></i>Upload Player Data
                    </h5>
                </div>
                <div class="card-body">
                    <form id="bulk-upload-form">
                        <!-- Format Selection -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-gear me-1"></i>Data Format
                            </label>
                            <div class="btn-group w-100" role="group">
                                <input type="radio" class="btn-check" name="format" id="format-tab" value="tab" checked>
                                <label class="btn btn-outline-primary" for="format-tab">
                                    <i class="bi bi-table me-1"></i>Tab Separated
                                </label>
                                
                                <input type="radio" class="btn-check" name="format" id="format-csv" value="csv">
                                <label class="btn btn-outline-primary" for="format-csv">
                                    <i class="bi bi-file-earmark-text me-1"></i>CSV
                                </label>
                                
                                <input type="radio" class="btn-check" name="format" id="format-json" value="json">
                                <label class="btn btn-outline-primary" for="format-json">
                                    <i class="bi bi-braces me-1"></i>JSON
                                </label>
                            </div>
                        </div>

                        <!-- Format Instructions -->
                        <div class="mb-4">
                            <div id="tab-instructions">
                                <h6><i class="bi bi-info-circle me-2"></i>Tab Separated Format</h6>
                                <p class="mb-2">Each line should contain: <code>PlayerName\tDota2ID\tMMR\tNotes(optional)</code></p>
                                <div class="format-example">HyO	182065786	7100	Pro player
Player2	123456789	6500	Rising star
Player3	987654321	5800</div>
                            </div>
                            
                            <div id="csv-instructions" style="display: none;">
                                <h6><i class="bi bi-info-circle me-2"></i>CSV Format</h6>
                                <p class="mb-2">Each line should contain: <code>PlayerName,Dota2ID,MMR,Notes(optional)</code></p>
                                <div class="format-example">HyO,182065786,7100,"Pro player"
Player2,123456789,6500,"Rising star"
Player3,987654321,5800,</div>
                            </div>
                            
                            <div id="json-instructions" style="display: none;">
                                <h6><i class="bi bi-info-circle me-2"></i>JSON Format</h6>
                                <p class="mb-2">Array of player objects with properties: name, dota2id, mmr, notes</p>
                                <div class="format-example">[
  {"name": "HyO", "dota2id": "182065786", "mmr": 7100, "notes": "Pro player"},
  {"name": "Player2", "dota2id": "123456789", "mmr": 6500, "notes": "Rising star"},
  {"name": "Player3", "dota2id": "987654321", "mmr": 5800}
]</div>
                            </div>
                        </div>

                        <!-- Data Input -->
                        <div class="mb-4">
                            <label for="player-data" class="form-label">
                                <i class="bi bi-pencil me-1"></i>Player Data
                            </label>
                            <textarea class="form-control" id="player-data" rows="12" 
                                      placeholder="Paste your player data here..."></textarea>
                            <div class="form-text">
                                <i class="bi bi-lightbulb me-1"></i>
                                <span id="input-hint">Use Tab character to separate fields. Each player on a new line.</span>
                            </div>
                        </div>

                        <!-- Options -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <h6 class="mb-3">
                                    <i class="bi bi-gear me-2"></i>Upload Options
                                </h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="skip-duplicates" checked>
                                    <label class="form-check-label" for="skip-duplicates">
                                        <i class="bi bi-shield-check me-1"></i>Skip duplicate Dota2 IDs
                                    </label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="update-existing">
                                    <label class="form-check-label" for="update-existing">
                                        <i class="bi bi-arrow-clockwise me-1"></i>Update existing players
                                    </label>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <h6 class="mb-3">
                                    <i class="bi bi-graph-up me-2"></i>Validation Rules
                                </h6>
                                <div class="small text-muted">
                                    <div class="mb-1">
                                        <i class="bi bi-check-circle text-success me-1"></i>
                                        <strong>Name:</strong> 2-50 characters
                                    </div>
                                    <div class="mb-1">
                                        <i class="bi bi-check-circle text-success me-1"></i>
                                        <strong>Dota2 ID:</strong> 6-20 digits
                                    </div>
                                    <div class="mb-1">
                                        <i class="bi bi-check-circle text-success me-1"></i>
                                        <strong>MMR:</strong> 0-20000
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Alert Messages -->
                        <div id="upload-alert" class="alert" style="display: none;"></div>

                        <!-- Progress Bar -->
                        <div id="upload-progress" class="mb-4" style="display: none;">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h6 class="mb-0">
                                    <i class="bi bi-arrow-repeat me-2"></i>Upload Progress
                                </h6>
                                <span id="progress-percentage">0%</span>
                            </div>
                            <div class="progress">
                                <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                     id="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <div class="small text-muted mt-1">
                                <span id="progress-text">Preparing upload...</span>
                            </div>
                        </div>

                        <!-- Results -->
                        <div id="upload-results" class="mb-4" style="display: none;">
                            <h6 class="mb-3">
                                <i class="bi bi-list-check me-2"></i>Upload Results
                            </h6>
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <div class="card text-center border-success">
                                        <div class="card-body py-2">
                                            <h5 class="card-title text-success mb-0">
                                                <i class="bi bi-check-circle"></i>
                                            </h5>
                                            <h4 id="results-added" class="mb-0">0</h4>
                                            <small class="text-muted">Added</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-info">
                                        <div class="card-body py-2">
                                            <h5 class="card-title text-info mb-0">
                                                <i class="bi bi-arrow-clockwise"></i>
                                            </h5>
                                            <h4 id="results-updated" class="mb-0">0</h4>
                                            <small class="text-muted">Updated</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-secondary">
                                        <div class="card-body py-2">
                                            <h5 class="card-title text-secondary mb-0">
                                                <i class="bi bi-skip-forward"></i>
                                            </h5>
                                            <h4 id="results-skipped" class="mb-0">0</h4>
                                            <small class="text-muted">Skipped</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="card text-center border-warning">
                                        <div class="card-body py-2">
                                            <h5 class="card-title text-warning mb-0">
                                                <i class="bi bi-exclamation-triangle"></i>
                                            </h5>
                                            <h4 id="results-errors" class="mb-0">0</h4>
                                            <small class="text-muted">Errors</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="d-flex gap-2">
                            <button type="button" class="btn btn-outline-primary" id="validate-btn">
                                <i class="bi bi-search me-1"></i>Validate Data
                            </button>
                            <button type="submit" class="btn btn-success" id="upload-btn">
                                <i class="bi bi-upload me-1"></i>Upload Players
                            </button>
                            <button type="button" class="btn btn-outline-secondary" id="clear-btn">
                                <i class="bi bi-trash me-1"></i>Clear
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom Script -->
    <script src="js/masterlistupload.js"></script>
</body>
</html> 