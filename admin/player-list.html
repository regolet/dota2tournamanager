<!-- player-list.html -->
<section id="player-list" class="mb-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="h3 mb-0">
            <i class="bi bi-people-fill me-2"></i>Player List Management
        </h2>
        <div class="btn-group">
            <button type="button" class="btn btn-primary me-2" id="add-player-button">
                <i class="bi bi-person-plus-fill me-1"></i> Add Player
            </button>
            <button type="button" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#playerListHelpModal">
                <i class="bi bi-question-circle me-1"></i> Help
            </button>
        </div>
    </div>

    <!-- Tournament Selector -->
    <div class="card shadow-sm mb-4">
        <div class="card-body p-3">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-filter-circle me-2 text-primary"></i>
                        <label for="session-selector" class="form-label mb-0 me-3">Tournament:</label>
                        <select id="session-selector" class="form-select" style="max-width: 300px;">
                            <option value="">Loading tournaments...</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6 text-end">
                    <button id="refresh-sessions" class="btn btn-outline-primary btn-sm me-2">
                        <i class="bi bi-arrow-clockwise me-1"></i> Refresh
                    </button>
                    <span id="session-player-count" class="badge bg-secondary">0 players</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Player List Controls -->
    <div class="card shadow-sm mb-4">
        <div class="card-body p-3">
            <div class="row g-3 align-items-center">
                <div class="col-md-6">
                    <div class="input-group">
                        <span class="input-group-text">
                            <i class="bi bi-search"></i>
                        </span>
                        <input type="text" class="form-control" id="player-search" 
                               placeholder="Search players by name or Dota 2 ID...">
                        <button id="search-button" class="btn btn-outline-secondary" type="button">
                            <i class="bi bi-funnel"></i> Filter
                        </button>
                    </div>
                </div>
                <div class="col-md-6 d-flex justify-content-md-end">
                    <div class="btn-group">
                        <button id="refresh-player-list" class="btn btn-outline-primary">
                            <i class="bi bi-arrow-clockwise me-1"></i> Refresh List
                        </button>
                        <button type="button" class="btn btn-outline-danger me-2" id="remove-all-players-button">
                            <i class="bi bi-trash me-1"></i> Remove All Players
                        </button>
                        <button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-download me-1"></i> Export
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" id="export-csv">CSV</a></li>
                            <li><a class="dropdown-item" href="#" id="export-json">JSON</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" id="export-print">Print List</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player List Table -->
    <div class="card shadow-sm border-0 mx-4">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-striped table-hover align-middle mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th class="ps-3">Player</th>
                            <th class="text-center">MMR</th>
                            <th>Dota 2 ID</th>
                            <th>Tournament</th>
                            <th>ID</th>
                            <th>Registered</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="player-table-body" class="border-top-0">
                        <!-- Empty state -->
                        <tr id="no-players-message">
                            <td colspan="7" class="text-center py-5">
                                <div class="text-muted">
                                    <i class="bi bi-people display-6 d-block mb-3 opacity-25"></i>
                                    <h5>Select a tournament to view players</h5>
                                    <p class="mb-0">Choose a tournament from the dropdown above to see registered players</p>
                                </div>
                            </td>
                        </tr>
                        <!-- Player rows will be inserted here by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <!-- Table Footer -->
            <div class="card-footer bg-light d-flex justify-content-between align-items-center">
                <div class="text-muted small">
                    <span id="player-count">0</span> players found
                </div>
                <div class="d-flex gap-2">
                    <select class="form-select form-select-sm" style="width: auto;">
                        <option>10 per page</option>
                        <option>25 per page</option>
                        <option>50 per page</option>
                        <option>100 per page</option>
                    </select>
                    <nav>
                        <ul class="pagination pagination-sm mb-0">
                            <li class="page-item disabled">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bulk Actions Bar removed -->
    
    <!-- Player List Help Modal -->
    <div class="modal fade" id="playerListHelpModal" tabindex="-1" aria-labelledby="playerListHelpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="playerListHelpModalLabel">
                        <i class="bi bi-question-circle-fill text-primary me-2"></i>Player List Help
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6 class="fw-bold">Managing the Player List:</h6>
                    <ol class="mb-4">
                        <li class="mb-2">Use the search bar to filter players by name or ID</li>
                        <li class="mb-2">Click on column headers to sort the list</li>
                        <li class="mb-2">Edit individual players by clicking the edit button in the Actions column</li>
                        <li>Export the list in various formats using the Export button</li>
                    </ol>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Got it!</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Player Modal -->
    <div class="modal fade" id="add-player-modal" tabindex="-1" aria-labelledby="addPlayerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addPlayerModalLabel">
                        <i class="bi bi-person-plus-fill text-primary me-2"></i>Add New Player
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="add-player-form">
                        <div class="mb-3">
                            <label for="add-player-name" class="form-label">Player Name</label>
                            <input type="text" class="form-control" id="add-player-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="add-player-dota2id" class="form-label">Dota 2 ID</label>
                            <input type="text" class="form-control" id="add-player-dota2id" required>
                        </div>
                        <div class="mb-3">
                            <label for="add-player-peakmmr" class="form-label">Peak MMR</label>
                            <input type="number" class="form-control" id="add-player-peakmmr">
                        </div>
                        <div class="mb-3">
                            <label for="add-player-id" class="form-label">Player ID</label>
                            <div class="input-group">
                                <span class="input-group-text">#</span>
                                <input type="text" class="form-control" id="add-player-id" disabled value="Will be auto-generated">
                            </div>
                            <div class="form-text">Player ID is automatically generated upon saving</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-new-player-button">Add Player</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Remove All Players Confirmation Modal -->
    <div class="modal fade" id="remove-all-players-modal" tabindex="-1" aria-labelledby="removeAllPlayersModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title" id="removeAllPlayersModalLabel">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>Remove All Players
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>
                        <strong>WARNING:</strong> This action cannot be undone!
                    </div>
                    <p>Are you sure you want to remove <strong>all players</strong> from the tournament? This will permanently delete all player records.</p>
                    <div class="form-check mt-3">
                        <input class="form-check-input" type="checkbox" id="confirm-remove-all-players">
                        <label class="form-check-label" for="confirm-remove-all-players">
                            I understand this action cannot be reversed
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirm-remove-all-button" disabled>
                        <i class="bi bi-trash-fill me-1"></i>Remove All Players
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Edit Player Modal -->
    <div class="modal fade" id="edit-player-modal" tabindex="-1" aria-labelledby="editPlayerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editPlayerModalLabel">
                        <i class="bi bi-pencil-square text-primary me-2"></i>Edit Player
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="edit-player-form">
                        <input type="hidden" id="edit-player-index">
                        <input type="hidden" id="edit-player-id">
                        <div class="mb-3">
                            <label for="edit-player-name" class="form-label">Player Name</label>
                            <input type="text" class="form-control" id="edit-player-name" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-player-dota2id" class="form-label">Dota 2 ID</label>
                            <input type="text" class="form-control" id="edit-player-dota2id" required>
                        </div>
                        <div class="mb-3">
                            <label for="edit-player-peakmmr" class="form-label">Peak MMR</label>
                            <input type="number" class="form-control" id="edit-player-peakmmr">
                        </div>
                        <div class="mb-3">
                            <label for="edit-player-registration-date" class="form-label">Registration Date</label>
                            <input type="text" class="form-control" id="edit-player-registration-date" readonly>
                            <div class="form-text">Registration date cannot be modified</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="save-player-changes">Save Changes</button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Player List initialization is handled by admin/js/playerList.js -->
<script>
    // This template will be initialized by the modern playerList.js module
    // All event handlers and data loading are handled by admin/js/playerList.js

</script>
